<!-- design_detail.html -->
{% extends 'designs/base.html' %}
{% block title %}{{ design.name }} - StyleBox{% endblock %}

{% block content %}
<div class="form-box">
  <h1 class="text-2xl font-bold text-blue-600 mb-2">{{ design.name }}</h1>
  <p class="text-sm text-gray-500 mb-1">Ø§Ù„Ù†ÙˆØ¹: {{ design.get_design_type_display }}</p>
  <p class="text-gray-700 text-sm mb-4">{{ design.description|default:"Ø¨Ø¯ÙˆÙ† ÙˆØµÙ" }}</p>

  <!-- âœ… Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø­ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… iframe -->
  <div class="preview-box">
    <iframe 
      id="preview-iframe-{{ design.id }}" 
      class="w-full h-64 border rounded bg-white"
      onload="
        const iframe = this;
        const doc = iframe.contentWindow.document;
        doc.open();
        doc.write(`<!DOCTYPE html><html><head><style>{{ design.css_code|escapejs }}</style></head><body style='margin:0;padding:1rem;'>{{ design.html_code|escapejs }}</body></html>`);
        doc.close();
      ">
    </iframe>
  </div>

  <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ø³Ø® -->
  <div class="flex gap-2 mb-4">
    <button class="btn-copy" onclick="copyToClipboard(`{{ design.html_code|escapejs }}`)">ğŸ“‹ Ù†Ø³Ø® HTML</button>
    <button class="btn-copy" onclick="copyToClipboard(`{{ design.css_code|escapejs }}`)">ğŸ“‹ Ù†Ø³Ø® CSS</button>
  </div>

  <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØµÙ…Ù… -->
  <p class="text-sm text-gray-600">
    ğŸ‘¤ Ø§Ù„Ù…ØµÙ…Ù…:
    <a href="{% url 'designer_profile' design.creator.username %}" class="text-blue-500 hover:underline">
      {{ design.creator.username }}
    </a><br>
    ğŸ•’ Ø§Ù„ØªØ§Ø±ÙŠØ®: {{ design.created_at|date:"Y-m-d H:i" }}
  </p>
</div>
{% endblock %}
