{% extends 'designs/base.html' %}
{% block title %}Ø¥Ø¶Ø§ÙØ© ØªØµÙ…ÙŠÙ… Ø¬Ø¯ÙŠØ¯ - StyleBox{% endblock %}
{% block content %}
<div class="form-box">
  <h2 class="page-title">â• Ø¥Ø¶Ø§ÙØ© ØªØµÙ…ÙŠÙ… Ø¬Ø¯ÙŠØ¯</h2>
  <form method="POST" id="design-form">
    {% csrf_token %}
    <div class="form-group">
      <label for="id_name" class="form-label">Ø§Ø³Ù… Ø§Ù„ØªØµÙ…ÙŠÙ…:</label>
      {{ form.name }}
    </div>
    <div class="form-group">
      <label for="id_design_type" class="form-label">Ù†ÙˆØ¹ Ø§Ù„ØªØµÙ…ÙŠÙ…:</label>
      {{ form.design_type }}
    </div>
    <div class="form-group">
      <label for="id_description" class="form-label">ÙˆØµÙ Ø§Ù„ØªØµÙ…ÙŠÙ…:</label>
      {{ form.description }}
    </div>
    <div class="form-group">
      <label for="id_html_code" class="form-label">ÙƒÙˆØ¯ HTML:</label>
      {{ form.html_code }}
    </div>
    <div class="form-group">
      <label for="id_css_code" class="form-label">ÙƒÙˆØ¯ CSS:</label>
      {{ form.css_code }}
    </div>
    <div class="button-group" style="display: flex; gap: 10px; margin-top: 20px;">
  <button type="submit" name="action" value="save_home" class="btn btn-primary">
    ğŸ’¾ Ø­ÙØ¸ ÙˆØ§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
  </button>
  <button type="submit" name="action" value="save_new" class="btn btn-secondary">
    â• Ø­ÙØ¸ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙŠØ¯
  </button>
</div>

  </form>

  <hr>
  <h3>ğŸ‘ï¸â€ğŸ—¨ï¸ Ù…Ø¹Ø§ÙŠÙ†Ø© ÙÙˆØ±ÙŠØ©:</h3>
  <iframe id="live-preview" style="width:100%; height:400px; border:1px solid #ccc;"></iframe>
</div>

<script>
  const htmlField = document.getElementById('id_html_code');
  const cssField = document.getElementById('id_css_code');
  const previewFrame = document.getElementById('live-preview');

  function updatePreview() {
    const html = htmlField.value;
    const css = `<style>${cssField.value}</style>`;
    const output = `${css}${html}`;
    const preview = previewFrame.contentDocument || previewFrame.contentWindow.document;
    preview.open();
    preview.write(output);
    preview.close();
  }

  htmlField.addEventListener('input', updatePreview);
  cssField.addEventListener('input', updatePreview);

  // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ÙŠ (Ù„Ùˆ ÙÙŠÙ‡ ÙƒÙˆØ¯ Ø¬Ø§Ù‡Ø²)
  document.addEventListener("DOMContentLoaded", updatePreview);
</script>
{% endblock %}